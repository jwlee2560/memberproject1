<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>ajax demo</title>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>

window.onload = function() {
	
	// cors 설정
	axios.defaults.withCredentials = true;
	
	let btn = document.getElementById("btn");
	
	btn.onclick = function() {
		
		alert("클릭");
		
		// 전송 주소
		let url = 'http://localhost:8000/abcd'; 
		
		// content type (MIME) : JSON
		const header = { "Content-type" : "application/json" } 	
		
		// 참고 : https://axios-http.com/kr/docs/req_config
		// CORS에 대한 허용 → 기본값 : false(CORS 금지)
		const crossOriginIsolated = { withCredentials: true } 
		
		// 전송 인자
		let parameters = { 'param1' : '한글', 
						   'param2' : 'java' } 

		// get method request
		axios.get(url,
				  // { params : parameters } ,
				  parameters,
				  header, 
				  crossOriginIsolated)
				  
				.then(function (response) {
					 
					 // 수신 성공 상태 핸들링(success : HTTP status code = 200)
					 console.log("수신 정보 : ", response.data);
					 
					 result = JSON.parse(response.data); // JSON parse(해석)
					 
					 alert(result.Hello + "," + result["인자1"] + "," + result.인자2)
				 
				})
				.catch(function (error) {
					
				 	// 에러 핸들링(error handling)
				 	alert("서버 에러 발생");				 	
				 	console.log(error);
				})
				.finally(function () {
					
				 	// java의 try ~ catch 에서의 finally와 같은 역할 : 항상 실행 
				 	console.log("axios end")
				});

	} //
	
} // onload
</script>
</head>
<body>

	<button type="button" id="btn">클릭</button>

</body>
</html>